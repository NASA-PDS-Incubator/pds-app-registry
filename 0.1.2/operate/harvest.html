<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.1 from src/site/xdoc/operate/harvest.xml.vm at 2020-08-13
 | Rendered using Apache Maven Fluido Skin 1.8
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.1" />
    <title>Registry Application &#x2013; Harvest Operation</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.8.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.8.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="https://pds.nasa.gov" id="bannerLeft"><img src="../images/pds_banner.png"  alt="" width="500"/></a></div>
          <div class="pull-right"><a href="https://github.com/NASA-PDS/pds-registry-app" id="bannerRight"><h2>PDS Registry</h2>
</a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2020-08-13<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.1.2</li>
      <li class="pull-right"><a href="https://github.com/NASA-PDS/pds-registry-app" class="externalLink" title="Registry App Github Repo">Registry App Github Repo</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Software Documentation</li>
    <li><a href="../index.html" title="About PDS Registry Application"><span class="none"></span>About PDS Registry Application</a></li>
    <li><a href="../install/index.html" title="Installation"><span class="icon-chevron-down"></span>Installation</a>
     <ul class="nav nav-list">
      <li><a href="../install/java.html" title="Java"><span class="none"></span>Java</a></li>
      <li><a href="../install/solr.html" title="Solr - Quick Start"><span class="none"></span>Solr - Quick Start</a></li>
      <li><a href="../install/tools.html" title="Tools (Manager, Harvest)"><span class="none"></span>Tools (Manager, Harvest)</a></li>
      <li><a href="../install/initialize.html" title="Initialize the Registry"><span class="none"></span>Initialize the Registry</a></li>
      <li><a href="../install/test.html" title="Test your deployment"><span class="none"></span>Test your deployment</a></li>
     </ul></li>
    <li><a href="../operate/index.html" title="Operation"><span class="icon-chevron-down"></span>Operation</a>
     <ul class="nav nav-list">
      <li><a href="../operate/common-ops.html" title="Common Operations"><span class="none"></span>Common Operations</a></li>
      <li><a href="../operate/test-vs-prod.html" title="Test vs Prod"><span class="none"></span>Test vs Prod</a></li>
      <li class="active"><a href="#"><span class="none"></span>Harvest</a></li>
      <li><a href="../operate/reg-manager.html" title="Registry Manager"><span class="none"></span>Registry Manager</a></li>
      <li><a href="../operate/reg-custom.html" title="Registry Customization"><span class="none"></span>Registry Customization</a></li>
      <li><a href="../operate/solr-tools.html" title="Solr Tools"><span class="none"></span>Solr Tools</a></li>
     </ul></li>
    <li><a href="../prod/index.html" title="Production Deployment"><span class="icon-chevron-down"></span>Production Deployment</a>
     <ul class="nav nav-list">
      <li><a href="../prod/solrcloud.html" title="SolrCloud"><span class="none"></span>SolrCloud</a></li>
      <li><a href="../prod/zookeeper-vm.html" title="ZooKeeper Installation (VM)"><span class="none"></span>ZooKeeper Installation (VM)</a></li>
      <li><a href="../prod/solr-vm.html" title="Solr Installation (VM)"><span class="none"></span>Solr Installation (VM)</a></li>
     </ul></li>
    <li><a href="../security/index.html" title="Security"><span class="icon-chevron-down"></span>Security</a>
     <ul class="nav nav-list">
      <li><a href="../security/proxy.html" title="Load Balancer & Proxy"><span class="none"></span>Load Balancer & Proxy</a></li>
      <li><a href="../security/zk.html" title="ZooKeeper"><span class="none"></span>ZooKeeper</a></li>
      <li><a href="../security/solr.html" title="Solr"><span class="none"></span>Solr</a></li>
     </ul></li>
    <li><a href="../reporting/index.html" title="Reporting & Visualization"><span class="none"></span>Reporting & Visualization</a></li>
    <li><a href="../index.html#Support" title="Support"><span class="none"></span>Support</a></li>
   <li class="nav-header">Downloads</li>
    <li><a href="https://github.com/NASA-PDS/pds-registry-app/releases/download/0.1.2/pds-registry-app-0.1.2-bin.tar.gz" class="externalLink" title="Current Release (tar.gz)"><span class="none"></span>Current Release (tar.gz)</a></li>
    <li><a href="https://github.com/NASA-PDS/pds-registry-app/releases/download/0.1.2/pds-registry-app-0.1.2-bin.zip" class="externalLink" title="Current Release (zip)"><span class="none"></span>Current Release (zip)</a></li>
    <li><a href="https://pds-engineering.jpl.nasa.gov/content/pds4-software" class="externalLink" title="Past Releases"><span class="none"></span>Past Releases</a></li>
   <li class="nav-header">Change Log</li>
    <li><a href="../" title="TBD"><span class="none"></span>TBD</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >



<section>
<h2><a name="Harvest"></a>Harvest</h2>


<p>
</p>
<ul>
  
<li><a href="#Overview">Overview</a></li>
  
<li><a href="#Quick_Start">Quick Start</a></li>
  
<li><a href="#InputDirs">Input Directories and Filters</a></li>
  
<ul>
    
<li><a href="#MultiDirs">Multiple Directories</a></li>
    
<li><a href="#FileFilter">Filtering Files</a></li>
    
<li><a href="#SubDirs">Excluding Sub-Directories</a></li>
    
<li><a href="#ProdFilter">Filtering Products</a></li>
  </ul>
  
<li><a href="#Extract">Extract More Metadata</a></li>
  
<ul>
    
<li><a href="#FileInfo">Basic File Information</a></li>
    
<li><a href="#BLOB">BLOB Storage</a></li>
    
<li><a href="#FileRef">File Reference / Access URL</a></li>
    
<li><a href="#IntRefs">Internal References</a></li>
    
<li><a href="#XPath">Extract Metadata by XPath</a></li>
    
<li><a href="#DDic">Extract Metadata by Data Dictionary Class</a></li>
  </ul>
</ul>


<section>
<h3><a name="Overview"></a>Overview</h3>


<p>
Harvest is a command-line tool for extracting metadata from PDS4 products (labels).
It parses PDS4 files and stores extracted metadata in an intermediate XML file.
This intermediate file can be loaded into Solr by Registry Manager or standard Solr tools, 
such as Solr post tool.
</p>

<p>
Harvest executable scripts for Windows (<i>harvest.bat</i>) and Linux / Mac (<i>harvest</i>) 
are located in <i>bin</i> sub-folder of the installation directory (e.g., <i>/home/pds/harvest/</i>).
</p>

<p>
To see the basic usage information (shown below) run Harvest without any parameters.
</p>

<div class="source"><pre class="prettyprint">
usage: harvest &lt;options&gt;
 -c  &lt;file&gt;    Harvest configuration file.
 -l  &lt;file&gt;    Log file. Default is /tmp/harvest/harvest.log.
 -o  &lt;dir&gt;     Output directory for Solr documents. Default is /tmp/harvest/solr
 -v  &lt;level&gt;   Logger verbosity: 0=Debug, 1=Info (default), 2=Warning, 3=Error.
</pre></div>

</section>
</section>



<section>
<h2><a name="Quick_Start"></a>Quick Start</h2>

<p>
To run Harvest you need an XML configuration file. 
The configuration file has several sections which control which folders and files the Harvest tool 
will crawl and what data to extract. Very basic configuration is shown below.
</p>
<div class="source"><pre class="prettyprint">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;harvest&gt;
  &lt;directories&gt;
    &lt;path&gt;/data/LADEE/ldex_20161118&lt;/path&gt;
    &lt;fileFilter&gt;
      &lt;include&gt;*.xml&lt;/include&gt;
    &lt;/fileFilter&gt;
  &lt;/directories&gt;
&lt;/harvest&gt;
</pre></div>



<p>
If you save this file as <i>/tmp/ladee.cfg</i> and run Harvest
</p>
<div class="source"><pre class="prettyprint">
harvest -c /tmp/ladee.cfg
</pre></div>



<p> 
all XML files in <i>/data/LADEE/ldex_20161118</i> folder and its subfolders will be processed.
By default, Harvest extracts only few metadata fields, such as lid, vid, title, and product class.
Extracted metadata is saved in <i>solr-docs.xml</i> file. 
Default output directory is <i>/tmp/harvest/solr/</i>.
The file contains a list of Solr documents in XML format whch can be loaded into Solr by Registry Manager 
or standard Solr tools. An example Solr document is shown below.

</p>
<div class="source"><pre class="prettyprint">
&lt;doc&gt;
  &lt;field name=&quot;lid&quot;&gt;urn:nasa:pds:ladee_ldex&lt;/field&gt;
  &lt;field name=&quot;vid&quot;&gt;1.2&lt;/field&gt;
  &lt;field name=&quot;lidvid&quot;&gt;urn:nasa:pds:ladee_ldex::1.2&lt;/field&gt;
  &lt;field name=&quot;title&quot;&gt;LADEE LUNAR DUST EXPERIMENT&lt;/field&gt;
  &lt;field name=&quot;product_class&quot;&gt;Product_Bundle&lt;/field&gt;
  &lt;field name=&quot;_package_id&quot;&gt;8627271a-01f5-49ad-8ce5-69f78fd6b5f4&lt;/field&gt;
&lt;/doc&gt;
</pre></div>


<section>
<h3><a name="Package_ID"></a>Package ID</h3>

<p>
Each Harvest run generates unique package ID, stored in <i>_package_id</i> field.
After loading extracted metadata into Solr, all documents from a particular Harvest run can be 
deleted by this package id.
</p>
</section>

</section>




<a name="InputDirs"></a><section id="InputDirs">
<h2><a name="Input_Directories_and_Filters"></a>Input Directories and Filters</h2>

<a name="MultiDirs"></a><section id="MultiDirs">
<h3><a name="Crawl_Products_from_Multiple_Directories"></a>Crawl Products from Multiple Directories</h3>

<p>
To process products from multiple directories, specify multiple &lt;path&gt; entries in Harvest configuration file:
</p>
<div class="source"><pre class="prettyprint">
&lt;harvest&gt;
  &lt;directories&gt;
    &lt;path&gt;/data/LADEE/ldex_20161118/data_calibrated&lt;/path&gt;
    &lt;path&gt;/data/LADEE/ldex_20161118/data_derived&lt;/path&gt;
...
&lt;/harvest&gt;
</pre></div>

</section>

<a name="FileFilter"></a><section id="FileFilter">
<h3><a name="Filtering_Files"></a>Filtering Files</h3>

<p>
This feature has limited functionality since all PDS4 product labels are XML files and
Harvest could not process other files. Usually you would include the following file filter in most 
Harvest configuration files:
</p>
<div class="source"><pre class="prettyprint">
&lt;harvest&gt;
  &lt;directories&gt;
...
    &lt;fileFilter&gt;
      &lt;include&gt;*.xml&lt;/include&gt;
    &lt;/fileFilter&gt;
  &lt;/directories&gt;
&lt;/harvest&gt;
</pre></div>
If you don't provide any filters, Harvest will try to pocess every file and for non-XML files you will see
&quot;Unsupported MIME type&quot; log messages.


<p>
You can use one or more &lt;include&gt; filters or one or more &lt;exclude&gt; filters, but not both.
</p>

</section>

<a name="SubDirs"></a><section id="SubDirs">
<h3><a name="Excluding_Sub-Directories"></a>Excluding Sub-Directories</h3>

<p>
For example, to exclude <i>xml_schema</i> sub-folder, add a directory filter in Harvest configuration file:
</p>
<div class="source"><pre class="prettyprint">
&lt;harvest&gt;
  &lt;directories&gt;
...
    &lt;directoryFilter&gt;
      &lt;exclude&gt;xml_schema&lt;/exclude&gt;
    &lt;/directoryFilter&gt;
  &lt;/directories&gt;
&lt;/harvest&gt;
</pre></div>
There is no include option for sub-directories.


</section>

<a name="ProdFilter"></a><section id="ProdFilter">
<h3><a name="Filtering_Products"></a>Filtering Products</h3>

<p>
You can include or exclude products. For example, to only process documents, add following 
product filter in Harvest configuration file:
</p>

<div class="source"><pre class="prettyprint">
&lt;harvest&gt;
  &lt;directories&gt;
...
    &lt;productFilter&gt;
      &lt;include&gt;Product_Document&lt;/include&gt;
    &lt;/productFilter&gt;
  &lt;/directories&gt;
&lt;/harvest&gt;
</pre></div>

</section>

</section>




<a name="Extract"></a><section id="Extract">
<h2><a name="Extracting_More_Metadata"></a>Extracting More Metadata</h2>

<a name="FileInfo"></a><section id="FileInfo">
<h3><a name="Basic_File_Information"></a>Basic File Information</h3>


<p>
To extracts basic file information, such as file name, type, size, and MD5 hash, 
include the following section in the configuration file.
</p>
<div class="source"><pre class="prettyprint">
&lt;fileInfo /&gt;
</pre></div>



<p>
Now if you run Harvest, the following fields will be extracted in addition to other fields discussed above.
</p>
<div class="source"><pre class="prettyprint">
  &lt;field name=&quot;_file_name&quot;&gt;bundle_ladee_ldex.xml&lt;/field&gt;
  &lt;field name=&quot;_file_type&quot;&gt;application/xml&lt;/field&gt;
  &lt;field name=&quot;_file_size&quot;&gt;5735&lt;/field&gt;
  &lt;field name=&quot;_file_md5&quot;&gt;zlYAt05W/Ag6Qy4HlNYy+g==&lt;/field&gt;
</pre></div>

</section>



<a name="BLOB"></a><section id="BLOB">
<h3><a name="BLOB_Storage"></a>BLOB Storage</h3>


<p>
You can store whole PDS product labels as BLOBs (Binary Large OBjects). 
To enable this feature modify <i>fileInfo</i> section in Harvest configuration file.
</p>
<div class="source"><pre class="prettyprint">
&lt;fileInfo&gt;
  &lt;blobStorage type=&quot;embedded&quot; /&gt;
&lt;/fileInfo&gt;
</pre></div>



<p>
After running Harvest, <i>solr-docs.xml</i> file will have <i>_file_blob</i> field with zipped product label. 
You can expect up to 900% compression rate for some files. 
For example, many LADEE housekeeping labels are about 45KB. BLOB size is about 5KB.
For smaller files, such as collection labels, compression rate is about 350% (5.5KB file is compressed to 1.6KB).
</p>


<p>
After loading data into Solr, you can extract BLOBs by running Registry Manager tool:
</p>
<div class="source"><pre class="prettyprint">
registry-manager export-file -lidvid urn:nasa:pds:ladee_ldex:data_calibrated::1.2 -filePath /tmp/data_calibrated.xml
</pre></div>


</section>




<a name="FileRef"></a><section id="FileRef">
<h3><a name="File_Reference_.2F_Access_URL"></a>File Reference / Access URL</h3>

<p>
To store full path of a product label file, add the following section in Harvest configuration file.
</p>
<div class="source"><pre class="prettyprint">
&lt;fileRef/&gt;
</pre></div>


<p>
After running Harvest, you should see <i>_file_ref</i> field added to each Solr document:
</p>
<div class="source"><pre class="prettyprint">
&lt;doc&gt;
...
  &lt;field name=&quot;_file_ref&quot;&gt;/C:/data/LADEE/ldex_20161118/bundle_ladee_ldex.xml&lt;/field&gt;
...
&lt;/doc&gt;
</pre></div>


<p>
Note that on Windows, backslashes are replaced with forward slashes and disk letter is included.
</p>


<p>
To replace file path prefix with another value, let's change &lt;fileRef/&gt; tag in Harvest configuration file:
</p>
<div class="source"><pre class="prettyprint">
&lt;fileRef&gt;
  &lt;replace prefix=&quot;/C:/data/LADEE/&quot; replacement=&quot;https://pds.nasa.gov/data/pds4/&quot; /&gt;
&lt;/fileRef&gt;
</pre></div>



<p>
Now, after running Harvest, you shoul see different <i>_file_ref</i> value:
</p>
<div class="source"><pre class="prettyprint">
&lt;doc&gt;
...
  &lt;field name=&quot;_file_ref&quot;&gt;https://pds.nasa.gov/data/pds4/ldex_20161118/bundle_ladee_ldex.xml&lt;/field&gt;
...
&lt;/doc&gt;
</pre></div>


</section>



<a name="IntRefs"></a><section id="IntRefs">
<h3><a name="Internal_References"></a>Internal References</h3>


<p>
To extract all internal references, add the following section in Harvest configuration file.
</p>
<div class="source"><pre class="prettyprint">
&lt;internalRefs prefix=&quot;ref_&quot;&gt;
  &lt;lidvid convertToLid=&quot;true&quot; keep=&quot;true&quot; /&gt;
&lt;/internalRefs&gt;
</pre></div>



<p>
Example output is shown below.
</p>
<div class="source"><pre class="prettyprint">
  &lt;field name=&quot;ref_lid_document&quot;&gt;urn:nasa:pds:ladee_uvs:document:DPSIS&lt;/field&gt;
  &lt;field name=&quot;ref_lid_instrument&quot;&gt;urn:nasa:pds:context:instrument:instrument.uvs__ladee&lt;/field&gt;
  &lt;field name=&quot;ref_lid_investigation&quot;&gt;urn:nasa:pds:context:investigation:mission.ladee&lt;/field&gt;
  &lt;field name=&quot;ref_lid_product&quot;&gt;urn:nasa:pds:ladee_uvs:calibration:wavelength&lt;/field&gt;
  &lt;field name=&quot;ref_lid_product&quot;&gt;urn:nasa:pds:ladee_uvs:raw:0016o_0000&lt;/field&gt;
  &lt;field name=&quot;ref_lid_target&quot;&gt;urn:nasa:pds:context:target:satellite.moon&lt;/field&gt;
  &lt;field name=&quot;ref_lidvid_product&quot;&gt;urn:nasa:pds:ladee_uvs:calibration:wavelength::1.0&lt;/field&gt;
  &lt;field name=&quot;ref_lidvid_product&quot;&gt;urn:nasa:pds:ladee_uvs:raw:0016o_0000::1.0&lt;/field&gt;
</pre></div>



<p>
The format of generated field names is as follows:
</p>
<div class="source"><pre class="prettyprint">
&lt;prefix&gt;&lt;lid or lidvid&gt;_&lt;reference type&gt;
</pre></div>



<p>
Prefix is configurable. Lidvids can be converted to lids. 
If <i>keep</i> attribute is <i>true</i> as in the example above, both original lidvid and generated lid references are saved. 
If <i>keep</i> attribute is <i>false</i>, then only lid reference is saved.
</p>


</section>




<a name="XPath"></a><section id="XPath">
<h3><a name="Extract_Metadata_by_XPath"></a>Extract Metadata by XPath</h3>


<p>
To extract metadata by XPath, you have to create one or more mapping files and list them 
in Harvest configuration file as shown below.
</p>
<div class="source"><pre class="prettyprint">
&lt;harvest&gt;
...
  &lt;xpathMaps baseDir=&quot;/home/pds/harvest/conf&quot;&gt;
    &lt;xpathMap filePath=&quot;common.xml&quot; /&gt;
    &lt;xpathMap rootElement=&quot;Product_Observational&quot; filePath=&quot;observational.xml&quot; /&gt;
  &lt;/xpathMaps&gt;
&lt;/harvest&gt;
</pre></div>



<p>
In the example above there are two <i>xpathMap</i> entries. Each entry must have <i>filePath</i> attribute 
pointing to a mapping file. A path can be either absolute or relative to the <i>baseDir</i> attribute 
of the <i>xpathMaps</i> tag. The <i>baseDir</i> attribute is optional. The same example with absolute paths
is shown below.
</p>
<div class="source"><pre class="prettyprint">
  &lt;xpathMaps&gt;
    &lt;xpathMap filePath=&quot;/home/pds/harvest/conf/common.xml&quot; /&gt;
    &lt;xpathMap rootElement=&quot;Product_Observational&quot; filePath=&quot;/home/pds/harvest/conf/observational.xml&quot; /&gt;
  &lt;/xpathMaps&gt;
</pre></div>



<p>
An <i>xpathMap</i> entry can have optional <i>rootElement</i> attribute. 
Without this attribute, XPaths queries defined in a mapping file (<i>common.xml</i>),
will run against every XML document processed by Harvest.
With <i>rootElement</i> attribute, only XMLs with that root element will be processed.
</p>

<section>
<h4><a name="Mapping_Files"></a>Mapping Files</h4>


<p>
A mapping file has one or more entries which map an output field name to an XPath query.
For example, to extract <i>start_date_time</i> and <i>stop_date_time</i> from observational products,
you can use the following file.
</p>


<div class="source"><pre class="prettyprint">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;xpaths&gt;
  &lt;xpath fieldName=&quot;start_date_time&quot;&gt;/Product_Observational/Observation_Area/Time_Coordinates/start_date_time&lt;/xpath&gt;
  &lt;xpath fieldName=&quot;stop_date_time&quot;&gt;/Product_Observational/Observation_Area/Time_Coordinates/stop_date_time&lt;/xpath&gt;
&lt;/xpaths&gt;
</pre></div>


<p>
You can use optional <i>dataType=&quot;date&quot;</i> attribute to convert valid PDS dates to 
ISO-8601 &quot;instant&quot; format required by Apache Solr (e.g., &quot;2013-10-24T00:49:37.457Z&quot;).
</p>


<div class="source"><pre class="prettyprint">
&lt;xpaths&gt;
  &lt;xpath fieldName=&quot;start_date_time&quot; dataType=&quot;date&quot;&gt;/Product_Observational/Observation_Area/Time_Coordinates/start_date_time&lt;/xpath&gt;
  &lt;xpath fieldName=&quot;stop_date_time&quot; dataType=&quot;date&quot;&gt;/Product_Observational/Observation_Area/Time_Coordinates/stop_date_time&lt;/xpath&gt;
&lt;/xpaths&gt;
</pre></div>

</section><section>
<h4><a name="XML_Name_Spaces"></a>XML Name Spaces</h4>

<p>
Harvest ignores namespaces when extracting metadata by XPath.
Below is a fragment of LADEE UVS product label which uses &quot;ladee&quot; namespace for mission area fields.
</p>


<div class="source"><pre class="prettyprint">
  &lt;Observation_Area&gt;
    &lt;Mission_Area&gt;
      &lt;ladee:latitude&gt;17.2367925372247&lt;/ladee:latitude&gt;
      &lt;ladee:longitude&gt;194.054477731391&lt;/ladee:longitude&gt; 
      ...
</pre></div>


<p>
To extract latitude and longitude you can use the following XPaths without namespaces.
</p>


<div class="source"><pre class="prettyprint">
&lt;xpaths&gt;
  &lt;xpath fieldName=&quot;latitude&quot;&gt;//Mission_Area/latitude&lt;/xpath&gt;
  &lt;xpath fieldName=&quot;longitude&quot;&gt;//Mission_Area/longitude&lt;/xpath&gt;
&lt;/xpaths&gt;
</pre></div>

</section></section>



<a name="DDic"></a><section id="DDic">
<h3><a name="Extract_Metadata_by_Data_Dictionary_Class_.2F_Extract_All_Fields"></a>Extract Metadata by Data Dictionary Class / Extract All Fields</h3>


<p>
Harvest can automatically flatten out XML files and generate field names using the following naming convention:
</p>

<div class="source"><pre class="prettyprint">
&lt;namespace&gt;.&lt;class name&gt;.&lt;namespace&gt;.&lt;attribute name&gt;
</pre></div>


<p>
For example
</p>

<div class="source"><pre class="prettyprint">
  &lt;field name=&quot;pds.Investigation_Area.pds.name&quot;&gt;LADEE&lt;/field&gt;
  &lt;field name=&quot;pds.Investigation_Area.pds.type&quot;&gt;Mission&lt;/field&gt;
  &lt;field name=&quot;pds.Mission_Area.ladee.activity_number&quot;&gt;16&lt;/field&gt;
  &lt;field name=&quot;pds.Mission_Area.ladee.activity_type&quot;&gt;Occultation&lt;/field&gt;
  &lt;field name=&quot;pds.Mission_Area.ladee.altitude&quot;&gt;245.731087458064&lt;/field&gt;
</pre></div>


<p>
The same naming convention is used by PDS4 data dictionaries in JSON format, available at 
<a class="externalLink" href="https://pds.nasa.gov/datastandards/dictionaries/" target="_blank">PDS website</a>.
</p>


<p>
To extract all fields, add the following section in Harvest configuration file.
</p>

<div class="source"><pre class="prettyprint">
  &lt;autogenFields /&gt;
</pre></div>


<p>
To extract a subset of fields, add <i>classFilter</i> section which can have a list of 
either include or exclude filters (but not both). The following example will extract all fields from mission area.
</p>

<div class="source"><pre class="prettyprint">
  &lt;autogenFields&gt;
    &lt;classFilter&gt;
      &lt;include&gt;pds.Mission_Area&lt;/include&gt;
    &lt;/classFilter&gt;
  &lt;/autogenFields&gt;
</pre></div>

<section>
<h4><a name="Date_Fields"></a>Date Fields</h4>

<p>
Harvest will try to convert all fields containing &quot;date&quot; string in their names to 
ISO-8601 &quot;instant&quot; format required by Apache Solr (e.g., &quot;2013-10-24T00:49:37.457Z&quot;).
If a field value could not be converted to ISO-8601 format, a warning message will be printed 
and original value will be saved.
</p>

</section></section>


</section>




        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &#169;      2020..</p>
        </div>
      </div>
    </footer>
  </body>
</html>
